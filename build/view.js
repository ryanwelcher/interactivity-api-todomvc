import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function s(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={exports:{}};return t[e](r,r.exports,s),r.exports}s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const i=(a={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope},l={},s.d(l,a),l),{_n}=wp.i18n,{state:r,actions:n,helpers:d}=(0,i.store)("to-dos",{state:{init:!0,editingToDo:0,toDos:[],get hasToDos(){return r.toDos.length>0},get toDosLeft(){return r.toDos.filter((e=>!e.completed)).length},get itemsLeft(){return` ${_n("item","items",r.toDosLeft,"to-do-mvc")} left`},get hasCompletedTodos(){return r.toDos.some((e=>e.completed))},get isBeingEdited(){const{item:{id:e}}=(0,i.getContext)();return r.editingToDo==parseInt(e)},get todosToDisplay(){switch(r.view){case"active":return r.toDos.filter((e=>!e.completed));case"completed":return r.toDos.filter((e=>e.completed));default:return r.toDos}},get checkViewState(){const{attributes:{"data-status":e}}=(0,i.getElement)();return r.view===e}},actions:{saveEditsForTodo:e=>{13===e.keyCode&&d.saveEditsForTodo()},onKeyDown:e=>{if(13===e.keyCode){const{ref:e}=(0,i.getElement)();0===r.editingToDo&&(r.toDos=[...r.toDos,{id:r.toDos.length+1,title:e.value,completed:!1}],e.value="")}},toggleCompleted:()=>{const{ref:{dataset:{id:e}}}=(0,i.getElement)();r.toDos=r.toDos.map((t=>(t.id===parseInt(e)&&(t.completed=!t.completed),t)))},clearCompletedTodos:()=>{r.toDos=r.toDos.filter((e=>!e.completed))},markAllComplete:()=>{const e=r.toDos.every((e=>e.completed));r.toDos=r.toDos.map((t=>(t.completed=!e,t)))},deleteTodo:()=>{const{ref:{dataset:{id:e}}}=(0,i.getElement)();r.toDos=r.toDos.filter((t=>t.id!==parseInt(e)))},editTodo:e=>{const{item:{id:t}}=(0,i.getContext)();r.editingToDo=parseInt(t),setTimeout((0,i.withScope)((()=>{const{ref:e}=(0,i.getElement)();e.closest("li").querySelector(".edit").focus()})),0)},focused:e=>{console.log(e)},editBlur:()=>{d.saveEditsForTodo()},showAllTodos:e=>{r.view="all",n.navigate(e)},showActiveTodos:e=>{r.view="active",n.navigate(e)},showCompletedTodos:e=>{r.view="completed",n.navigate(e)},*navigate(e){e.preventDefault();const{actions:t}=yield Promise.resolve().then(s.bind(s,438));yield t.navigate(e.target.href)}},callbacks:{saveTodos:()=>{r.init||localStorage.setItem("toDos",JSON.stringify(r.toDos))},loadTodos:()=>{const e=localStorage.getItem("toDos");e&&(r.toDos=JSON.parse(e)),r.init=!1}},helpers:{saveEditsForTodo:()=>{const{ref:e}=(0,i.getElement)(),{item:{id:t}}=(0,i.getContext)();r.editingToDo===t&&(r.toDos=[...r.toDos.map((o=>(o.id===parseInt(t)&&(o.title=e.value),o)))],r.editingToDo=0)}}});var a,l;